const CURRENCY_SYMBOLS={ARS:'$ ',AUD:'$ ',CAD:'$ ',USD:'$ ',BMD:'$ ',CLP:'$ ',HKD:'$ ',MXN:'$ ',NZD:'$ ',SGD:'$ ',TWD:'$ ',CNY:'¥ ',JPY:'¥ ',BCH:'₿ ',BTC:'₿ ',AED:'د.إ ',BDT:'৳ ',BHD:'د.ب ',BRL:'R$ ',CZK:'Kč ',DKK:'Kr. ',ETH:'Ξ ',EUR:'€ ',GBP:'£ ',HUF:'Ft ',IDR:'Rp ',ILS:'₪ ',INR:'₹ ',KRW:'₩ ',KWD:'د.ك ',LKR:'රු ',LTC:'Ł ',MMK:'K ',MYR:'RM ',NOK:'kr ',SEK:'kr ',PHP:'₱ ',PKR:'Rs ',PLN:'zł ',RUB:'₽ ',SAR:'﷼‎ ',THB:'฿ ',TRY:'₺ ',UAH:'₴ ',VEF:'Bs ',VND:'₫ ',}
window.onload=function(){var slpAddress=localStorage.getItem('address');var currencyUnit=localStorage.getItem('currency');if(slpAddress&&currencyUnit){launchPos()}let launchButton=document.getElementById('launch-button');let posTab=document.getElementById('pos-tab');let widgetTab=document.getElementById('widget-tab');let slpText=document.getElementById('slp-address-input');let backButton=document.getElementById('back-button');launchButton.addEventListener('click',launchPos);posTab.addEventListener('click',tabSelect);widgetTab.addEventListener('click',tabSelect);slpText.addEventListener('input',getCurrencies);backButton.addEventListener('click',deleteLocalStorage)}
function tabSelect(){var targetTab=this.getAttribute('data-target');var targetTabContent=document.querySelector(targetTab);var otherTabs=document.querySelectorAll('.tabs:not('+targetTab+')');var tabContents=document.querySelectorAll('.tab-content:not('+targetTab+')');otherTabs.forEach(function(el){el.classList.remove('active')});tabContents.forEach(function(el){el.classList.remove('show');el.classList.add('hide')});this.classList.add('active');targetTabContent.classList.remove('hide');targetTabContent.classList.add('show')}var isSpice='';var currencySymbol='';var decimalPlaces=0;var runningTotal=0;var runningTotalStr='0';function launchPos(){var slpAddress=localStorage.getItem('address');var currencyUnit=localStorage.getItem('currency');let address=document.getElementById('slp-address-input').value;let currency=document.getElementById('currency-dropdown').value;if(checkSLPAddress(address)||checkSLPAddress(slpAddress)){currencyUnit=(currency?currency.toUpperCase():currencyUnit);slpAddress=(address?address.toLowerCase():slpAddress);localStorage.setItem('address',slpAddress);localStorage.setItem('currency',currencyUnit);document.getElementById('spice-button').setAttribute('address',slpAddress);document.getElementById('spice-button').setAttribute('amount-type',currencyUnit);currencySymbol=getCurrencySymbol(currencyUnit.toUpperCase());openKeypad();createServiceWorker()}else alert('Please enter a valid SLP address.')}function getCurrencySymbol(unit){return CURRENCY_SYMBOLS.hasOwnProperty(unit)?CURRENCY_SYMBOLS[unit]:''}function openKeypad(){document.getElementById('keypadWindow').style.display='block';updateKeypad()}function keyPress(keyInput){switch(keyInput){case-1:{if(runningTotalStr.length==1){runningTotalStr='0'}else{runningTotalStr=runningTotalStr.slice(0,-1)}updateKeypad()}break;case '.':function containsDecimal(){var search=runningTotalStr.split('');for(var i=0;i<search.length;i++){if(search[i]=='.'){return!0}}return!1}if(!containsDecimal()){if(runningTotalStr==='0'){runningTotalStr='0.'}else{runningTotalStr=runningTotalStr.concat(keyInput)}updateKeypad()}break;default:{if(runningTotalStr==='0'){runningTotalStr=keyInput}else{runningTotalStr=runningTotalStr.concat(keyInput)}updateKeypad()}}}function updateKeypad(){document.getElementById('numberAreaParagraph').innerHTML=currencySymbol+runningTotalStr+isSpice;runningTotal=parseFloat(runningTotalStr);document.getElementById('spice-button').setAttribute('amount',runningTotal)}function goToHomePage(){closeFullscreen()}function getCurrencies(){if(checkSLPAddress(document.getElementById('slp-address-input').value)){let xmlhttp=new XMLHttpRequest();let currencies=['spice'];xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState===4&&xmlhttp.status===200){var data=JSON.parse(xmlhttp.responseText).sort();data.forEach(function(c){currencies.push(c)});let currencyDropdown=document.getElementById('currency-dropdown');currencies.forEach(function(c){currencyDropdown.innerHTML+='<option value=\"'+c.toUpperCase()+'\">'+c.toUpperCase()+'</option>'});showCurrencyDropdown()}};xmlhttp.open('GET',urls.CURRENCIES_URL,!0);xmlhttp.send()}else{hideCurrencyDropdown()}}function showCurrencyDropdown(){let dropdownContainer=document.querySelector('.currency-select-container')
dropdownContainer.classList.add('show');dropdownContainer.classList.remove('hide')}function hideCurrencyDropdown(){let dropdownContainer=document.querySelector('.currency-select-container')
dropdownContainer.classList.remove('show');dropdownContainer.classList.add('hide')}function checkSLPAddress(address){return address?address.match(/^simpleledger:(q|p)[a-z0-9]{41}/):!1}function deleteLocalStorage(){localStorage.removeItem('address');localStorage.removeItem('currency');location.reload()}function createServiceWorker(){if('serviceWorker' in navigator){navigator.serviceWorker.register('/serviceworker.js').then(function(registration){console.log('Registration successful, scope is:',registration.scope)}).catch(function(error){console.error('Service worker registration failed, error:',error)})}}